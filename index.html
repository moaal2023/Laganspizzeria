<!DOCTYPE html>
<html lang="sv">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Lagans Pizzeria</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      overflow-x: hidden; /* ‚úÖ ŸäŸÖŸÜÿπ ÿßŸÑÿ™ŸÖÿØÿØ ÿßŸÑÿ£ŸÅŸÇŸä */
    }
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: #fffaf0;
      color: #333;
      line-height: 1.5;
    }
    header {
      background: #edaf12;
      padding: 30px 20px;
      text-align: center;
    }
    header h1 {
      font-size: 48px;
      color: #001e5b;
      margin: 0;
      font-family: 'Georgia', serif;
    }
    .info-box {
      max-width: 600px;
      margin: 20px auto;
      background: #fff3e0;
      border-left: 6px solid #ff7043;
      padding: 15px 25px;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(255, 112, 67, 0.3);
      font-weight: 600;
      color: #7a3a00;
      text-align: center;
      user-select: none;
      font-size: 18px;
      letter-spacing: 0.02em;
    }
    .lunch-box {
      max-width: 400px;
      margin: 30px auto;
      background: linear-gradient(135deg, #ffb347, #ffcc33);
      border-radius: 16px;
      box-shadow: 0 8px 20px rgba(255, 179, 71, 0.5);
      color: #4b2e00;
      padding: 25px 30px;
      text-align: center;
      user-select: none;
    }
    .lunch-box h2 {
      font-size: 28px;
      margin-bottom: 10px;
      font-weight: 700;
      text-shadow: 1px 1px 2px rgba(255, 255, 255, 0.7);
    }
    .lunch-box h2 span {
      font-weight: 900;
      font-size: 32px;
      color: #5a3700;
    }
    .lunch-box .lunch-price {
      font-size: 26px;
      font-weight: 700;
      margin-top: 6px;
      color: #5a3700;
      text-shadow: 1px 1px 2px rgba(255, 255, 255, 0.7);
    }

    .contact-box {
      max-width: 600px;
      margin: 20px auto;
      background: #fff8e1;
      border-left: 6px solid #ffb74d;
      padding: 20px 30px;
      border-radius: 14px;
      box-shadow: 0 6px 15px rgba(255, 179, 71, 0.4);
      color: #7a4a00;
      font-weight: 600;
      letter-spacing: 0.02em;
      text-align: center;
      user-select: none;
      font-size: 18px;
      line-height: 1.6;
    }
    .contact-box h2 {
      font-size: 28px;
      margin-bottom: 12px;
      color: #bf360c;
      text-shadow: 1px 1px 2px #fcd49a;
      font-weight: 800;
      font-family: 'Georgia', serif;
    }

    .category {
      margin: 30px auto;
      max-width: 900px;
      background: linear-gradient(135deg, #fff8e1, #ffe0b2);
      border-radius: 16px;
      box-shadow: 0 10px 25px rgba(255, 179, 71, 0.3);
      padding: 25px 30px;
      color: #5d3400;
      user-select: none;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    .category:hover {
      transform: translateY(-5px);
      box-shadow: 0 15px 30px rgba(255, 179, 71, 0.5);
    }
    .category h2 {
      font-size: 30px;
      font-weight: 800;
      margin-bottom: 15px;
      display: flex;
      align-items: center;
      gap: 12px;
      color: #bf360c;
      text-shadow: 1px 1px 2px #fcd49a;
      position: relative;
      padding-left: 50px;
    }
    .category h2::before {
      content: attr(data-emoji);
      font-size: 36px;
      position: absolute;
      left: 0;
      top: 50%;
      transform: translateY(-50%);
    }
    .price {
      background: #ffd54f;
      display: inline-block;
      padding: 8px 18px;
      border-radius: 30px;
      font-weight: 700;
      font-size: 20px;
      color: #5d3400;
      box-shadow: inset 0 2px 5px rgba(255, 255, 255, 0.6);
      margin-bottom: 20px;
      user-select: text;

      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      max-width: 100%;
      box-sizing: border-box;
    }
    ul.pizza-list {
      list-style: none;
      padding: 0;
      margin: 0;
    }
    ul.pizza-list li {
      font-size: 20px;
      margin: 10px 0;
      padding: 12px 15px;
      border-radius: 10px;
      background: #fff3e0;
      box-shadow: 0 4px 10px rgba(255, 179, 71, 0.15);
      display: flex;
      align-items: center;
      gap: 15px;
      flex-wrap: wrap;
    }
    ul.pizza-list li:hover {
      background: #ffecb3;
    }
    .pizza-emoji {
      font-size: 28px;
      flex-shrink: 0;
    }
    ul.pizza-list strong {
      flex-grow: 1;
      color: #7f4f00;
    }
    ul.pizza-list li em {
      font-style: italic;
      font-weight: 600;
      color: #a65c00;
      margin-left: 12px;
      font-size: 18px;
    }

    @media (max-width: 600px) {
      header h1 {
        font-size: 32px;
      }
      .category {
        padding: 15px 20px;
      }
      .category h2 {
        font-size: 24px;
        padding-left: 40px;
      }
      .price {
        font-size: 16px;
      }
    }
  </style>
</head>
<body>
  <header>
    <h1>Lagans Pizzeria üçï</h1>
  </header>

  <div class="lunch-box" id="lunch-box">
    <h2>üçΩÔ∏è Dagens Lunch</h2>
    <div class="lunch-price" id="lunch-price">119 kr</div>
    <p><strong>M√•ndag - Fredag</strong><br />11:30 - 13:30</p>
    <p>ü•ó Sallad &nbsp; | &nbsp; ü•§ Dricka &nbsp; |</p>
  </div>

  <div id="menu"></div>

  <div class="info-box" role="note" aria-label="Viktig information">
    üçï Barnpizzor √§r 10 kr mindre √§n ordinarie pris.<br />
    üïå Kebabk√∂tt finns som halal.
  </div>

  <section class="contact-box" role="contentinfo" aria-label="√ñppettider och kontaktinformation">
    <h2>üìÖ √ñppettider</h2>
    <p><strong>M√•ndag - Fredag:</strong> 11:30 - 20:00</p>
    <p><strong>L√∂rdag:</strong> 12:00 - 21:00</p>
    <p><strong>S√∂ndag:</strong> 12:00 - 20:00</p>

    <h2>üìû Kontakt</h2>
    <p><strong>Telefon:</strong> 0372-351-20</p>
    <p><strong>Adress:</strong> Bergagatan 2a, 341 50 Lagan</p>
  </section>

  <script>
    const categoryEmojis = {
      "pizza": "üçï", "sallad": "ü•ó", "dryck": "ü•§", "dricka": "ü•§",
      "dessert": "üç∞", "f√∂rr√§tt": "ü•ü", "pasta": "üçù", "burgare": "üçî",
      "hamburgare": "üçî", "soppa": "üç≤", "rulle": "üåØ", "wrap": "üåØ"
    };

    function getEmojiForCategory(cat) {
      cat = cat.toLowerCase();
      for (const key in categoryEmojis) {
        if (cat.includes(key)) return categoryEmojis[key];
      }
      return "üçΩÔ∏è";
    }

    function getEmojiForDish(name, category) {
      const lower = name.toLowerCase();
      if (lower.includes("hamburgare") || lower.includes("burger")) return "üçî";
      if (lower.includes("rulle") || lower.includes("wrap")) return "üåØ";
      return getEmojiForCategory(category);
    }

    const sheetUrl = 'https://docs.google.com/spreadsheets/d/18Pnw18jKK5cMUEgA8vT1hDIk718tESt1-a-ZOyWfxuo/edit';
    const gid = '0';

    async function fetchMenu() {
      const sheetID = sheetUrl.match(/spreadsheets\/d\/(.*?)(\/|$)/)[1];
      const url = `https://docs.google.com/spreadsheets/d/${sheetID}/gviz/tq?tqx=out:json&gid=${gid}`;

      try {
        const res = await fetch(url);
        if (!res.ok) throw new Error(`HTTP-fel: ${res.status}`);
        const text = await res.text();
        const json = JSON.parse(text.substr(47).slice(0, -2));
        const rows = json.table.rows;
        const menuContainer = document.getElementById("menu");
        const lunchPriceSpan = document.getElementById("lunch-price");

        menuContainer.innerHTML = '';
        let lunchPriceFromSheet = null;
        const pizzaGroups = {};
        const otherCategories = {};

        rows.forEach(row => {
          const cat = row.c[0]?.v || "";
          const name = row.c[3]?.v || "";
          const ingredients = row.c[4]?.v || "";
          let pricePizza = row.c[5]?.v || "";
          let priceFamily = row.c[6]?.v || "";

          if (cat.toLowerCase() === "lunch" && pricePizza) {
            lunchPriceFromSheet = pricePizza;
            return;
          }

          if (!name || !ingredients || !pricePizza) return;

          if (name.toLowerCase() === "ciao ciao") {
            pricePizza = "130";
            priceFamily = "340";
          }

          if (cat.toLowerCase() === "pizza" || name.toLowerCase() === "ciao ciao") {
            const key = `${pricePizza}-${priceFamily}`;
            if (!pizzaGroups[key]) pizzaGroups[key] = { pricePizza, priceFamily, items: [] };
            pizzaGroups[key].items.push({ name, ingredients });
          } else {
            if (!otherCategories[cat]) otherCategories[cat] = [];
            otherCategories[cat].push({ name, ingredients, pricePizza, category: cat });
          }
        });

        if (lunchPriceFromSheet !== null) {
          lunchPriceSpan.textContent = `${lunchPriceFromSheet} kr`;
        }

        const sortedGroups = Object.values(pizzaGroups).sort((a, b) => a.pricePizza - b.pricePizza);
        sortedGroups.forEach(group => {
          const block = document.createElement('div');
          block.className = 'category';
          block.setAttribute('data-emoji', categoryEmojis["pizza"]);

          let html = `<h2>Pizza</h2>`;
          html += `<div class="price">Pizza: ${group.pricePizza} kr | Familjepizza: ${group.priceFamily} kr</div>`;
          html += `<ul class="pizza-list">`;

          group.items.forEach(pizza => {
            html += `<li><span class="pizza-emoji">üçï</span><strong>${pizza.name}</strong><em>${pizza.ingredients}</em></li>`;
          });

          html += `</ul>`;
          block.innerHTML = html;
          menuContainer.appendChild(block);
        });

        for (const [cat, items] of Object.entries(otherCategories)) {
          const block = document.createElement('div');
          block.className = 'category';
          block.setAttribute('data-emoji', getEmojiForCategory(cat));

          let html = `<h2>${cat}</h2>`;
          html += `<ul class="pizza-list">`;

          items.forEach(item => {
            const emoji = getEmojiForDish(item.name, item.category);
            html += `<li><span class="pizza-emoji">${emoji}</span><strong>${item.name}</strong><em>${item.ingredients}</em> <em>(${item.pricePizza} kr)</em></li>`;
          });

          html += `</ul>`;
          block.innerHTML = html;
          menuContainer.appendChild(block);
        }
      } catch (error) {
        document.getElementById("menu").innerHTML = `
          <p style="color:#b71c1c; text-align:center; margin-top: 40px;">
            Misslyckades att h√§mta menyn.<br>
            Kontrollera att Google Sheets-l√§nken √§r korrekt.<br>
            <em>${error.message}</em>
          </p>`;
      }
    }

    fetchMenu();
  </script>
</body>
</html>
